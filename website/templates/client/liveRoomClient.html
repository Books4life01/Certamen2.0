{%extends "home/base.html"%}
{%block title%}LiveRoomCLient{%endblock%}

{%block script%}
<script src="{{url_for('static', filename='script/roomClientBaseCode.js')}}"></script>

<script>
    let roomKey = {{ roomKey|tojson }};
    let player = {{ player|tojson}};
   
    socket.on("roomTeamsUpdate", (data) =>{
        //Ensure that the room we are recieving data for is the room we are in
        if (data.roomKey == {{ roomKey|tojson }}){
            let teams = data.teams;
            console.log(teams);
        }
    });
    
    
    
    function documentReady(){
        $(document).on("keypress", function(e){
            if(e.which == 32){
                console.log("SPACE PRESSED");
                socket.emit("liveQuestionUpdate", data = {"roomKey": roomKey, "player":player,"questionNum": curQuestion,"questionType": roomData.curQuestionType, "actionType":"pause","questionNum":curQuestion,  "answer":$("#answerInput").val()})
            }
            console.log("KEY PRESSED: " + e.which);
        });
        $("#submitAnswerButton").click(()=>{
            submitAnswer();
        })
        
    }
</script>
{%endblock%}

{%block styles%}<style>
    #currentQuestionHolder{
        font-size: 2em;
        font-weight: bold;
        text-align: center;
        border: 1px dotted  white;
        width:50%;
        height:300px;
        margin-left: 5%;
        margin-right:5%;
    }
    #pastQuestions{
        border: 1px dotted orange;
        border-radius: 25px;
        width:35%;
        height:80%;
        margin-left: 5%;
        
    }
    #liveQuestionReciever{
        border: 1px dotted blue;
        height: 50%;
        overflow: auto;
    }
    
    .container{
        position: relative;
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
        align-items: center;
        border: 1px dotted red;
        width:100%;
        max-width:none;
        height:500px;

    }
    #submitAnswer{
        display: flex;
        flex-direction: row;
    }
    .hidden{
        display:none !important;
    }  
    #questionAnswer{
        height:20%;
    } 
    
    #answerContainer{
        border: 1px dotted yellow;
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        
    } 
</style>{%endblock%}

{%block content%}
<div class="container">
    <div id="pastQuestions">

    </div>

    <div id="currentQuestionHolder">
        <h1 class="center" id="questionTitle">Question #1</h1>
        <div id="liveQuestionReciever"></div>
        <div id="questionAnswer">
            <h6 id="liveQuestionClientInfo">Press Space to Buzz in</h6>
            <div class="hidden form-group"id="submitAnswer">
                <textArea class="form-control" id="answerInput"></textArea>
                <button class="input-group-text btn btn-primary"id="submitAnswerButton">Submit Answer</button>
            </div>
            <div id="liveAnswerReciever" class="hidden">
    
            </div>
        </div>
        
    </div>
    
</div>
{%endblock%}